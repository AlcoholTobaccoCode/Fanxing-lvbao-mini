<!--
@description: å’¨è¯¢èµ·å§‹é¡µ
-->
<script lang="ts" setup>
import { computed } from "vue";
import { useStore } from "@/cool";

const emit = defineEmits<{
	(e: "preset-select", value: string): void;
}>();

const { user } = useStore();
const userName = computed(() => user.info.value?.nickName || "ç”¨æˆ·");

const greeting = computed(() => {
	const hour = new Date().getHours();
	if (hour >= 5 && hour < 11) return "æ—©ä¸Šå¥½";
	if (hour >= 11 && hour < 14) return "ä¸­åˆå¥½";
	if (hour >= 14 && hour < 18) return "ä¸‹åˆå¥½";
	if (hour >= 18 && hour < 24) return "æ™šä¸Šå¥½";
	return "è¯¥ä¼‘æ¯å•¦";
});

const quickQuestions = [
	{ emoji: "ğŸš—", text: "äº¤é€šäº‹æ•…èµ”å¿æ€ä¹ˆå¤„ç†" },
	{ emoji: "âš–ï¸", text: "åŠ³åŠ¨åˆåŒä¸å…¬å¹³æ€ä¹ˆåŠ" },
	{ emoji: "ğŸ’¼", text: "ç¦»å©šè´¢äº§æ€ä¹ˆåˆ†å‰²" }
];

const handleClick = (text: string) => {
	emit("preset-select", text);
};
</script>

<template>
	<view class="consult-starter">
		<!-- æ¬¢è¿è¯­ -->
		<view class="welcome-section">
			<view class="fade-up delay-1 flex flex-row">
				<cl-text v-if="user.token" :pt="{ className: 'text-base text-surface-600' }"
					>{{ userName }}ï¼Œ</cl-text
				>
				<cl-text :pt="{ className: 'text-base text-surface-600' }">{{ greeting }}</cl-text>
			</view>
			<view class="fade-up delay-2">
				<cl-text size="24px" :pt="{ className: 'main-title' }">æˆ‘èƒ½å¸®æ‚¨ä»€ä¹ˆï¼Ÿ</cl-text>
			</view>
		</view>

		<!-- å¿«æ·é—®é¢˜å¡ç‰‡ -->
		<view class="fade-up delay-3">
			<view class="question-list">
				<view
					v-for="(item, i) in quickQuestions"
					:key="i"
					class="question-card"
					@click="handleClick(item.text)"
				>
					<text class="emoji">{{ item.emoji }}</text>
					<cl-text :pt="{ className: 'text-surface-700' }">{{ item.text }}</cl-text>
				</view>
			</view>
		</view>
	</view>
</template>

<style lang="scss" scoped>
.consult-starter {
	@apply h-full flex flex-col px-6;
	padding-top: 80px;
}

.welcome-section {
	@apply flex flex-col;
	margin-bottom: 32px;
}

.main-title {
	@apply text-surface-800;
	font-weight: 700;
	margin-top: 8px;
}

// è‡ªä¸‹è€Œä¸Šæ¸æ˜¾åŠ¨ç”»
.fade-up {
	opacity: 0;
	transform: translateY(20px);
	animation: fadeUpIn 0.6s ease-out forwards;
}

.delay-1 {
	animation-delay: 0.1s;
}
.delay-2 {
	animation-delay: 0.3s;
}
.delay-3 {
	animation-delay: 0.5s;
}

@keyframes fadeUpIn {
	0% {
		opacity: 0;
		transform: translateY(20px);
	}
	100% {
		opacity: 1;
		transform: translateY(0);
	}
}

.question-list {
	@apply flex flex-col gap-4;
}

.question-card {
	@apply flex flex-row items-center gap-3 bg-surface-100 rounded-full;
	padding: 12px 16px;
}

.emoji {
	font-size: 20px;
}
</style>
