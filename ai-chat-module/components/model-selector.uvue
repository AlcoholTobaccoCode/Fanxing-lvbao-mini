<script lang="ts" setup>
import type { LawModelType } from "@/cool/store/chatInput-store/lawSession";

interface Props {
	modelValue: LawModelType;
	locked?: boolean;
}

const props = withDefaults(defineProps<Props>(), {
	modelValue: "fabao",
	locked: false
});

const emit = defineEmits<{
	(e: "update:modelValue", value: LawModelType): void;
	(e: "change", value: LawModelType): void;
}>();

const selectModel = (type: LawModelType) => {
	if (props.locked) return;
	emit("update:modelValue", type);
	emit("change", type);
};

const modelLabels: Record<LawModelType, { icon: string; label: string; desc: string }> = {
	fabao: {
		icon: "ğŸŒ",
		label: "é€šç”¨ç‰ˆ",
		desc: "å…¨åŸŸæ³•å¾‹æ™ºèƒ½ä¸­æ¢"
	},
	lzx: {
		icon: "ğŸ—¼",
		label: "ä¸“ä¸šç‰ˆ",
		desc: "æ‹¥æœ‰è¿‡ç¡¬çš„ä¸“ä¸šæ³•å¾‹çŸ¥è¯†"
	}
};
</script>

<template>
	<view class="model-selector">
		<!-- æœªé”å®šï¼šå¯é€‰æ‹© -->
		<view v-if="!locked" class="model-options">
			<view
				class="model-option"
				:class="{ active: modelValue === 'fabao' }"
				@tap="selectModel('fabao')"
			>
				<view class="model-icon">
					<cl-text>{{ modelLabels.fabao.icon }}</cl-text>
				</view>
				<view class="model-info">
					<view class="model-label">
						<text class="label-text">{{ modelLabels.fabao.label }}</text>
						<view class="recommend-badge">
							<text class="badge-text">æ¨è</text>
						</view>
					</view>
					<text class="model-desc">{{ modelLabels.fabao.desc }}</text>
				</view>
			</view>

			<view
				class="model-option"
				:class="{ active: modelValue === 'lzx' }"
				@tap="selectModel('lzx')"
			>
				<view class="model-icon">
					<cl-text>{{ modelLabels.lzx.icon }}</cl-text>
				</view>
				<view class="model-info">
					<view class="model-label">
						<text class="label-text">{{ modelLabels.lzx.label }}</text>
					</view>
					<text class="model-desc">{{ modelLabels.lzx.desc }}</text>
				</view>
			</view>
		</view>

		<!-- å·²é”å®šï¼šåªè¯»å±•ç¤º -->
		<view v-else class="model-locked">
			<view class="model-icon">
				<cl-text>{{ modelLabels[modelValue].icon }}</cl-text>
			</view>
			<text class="locked-text"> å½“å‰æ¨¡å‹ï¼š{{ modelLabels[modelValue].label }} </text>
		</view>
	</view>
</template>

<style lang="scss" scoped>
.model-selector {
	@apply w-full;
}

.model-options {
	@apply flex flex-row gap-3;
}

.model-option {
	@apply flex-1 flex flex-row items-center gap-2 p-3 rounded-xl;
	background-color: #f5f5f5;
	border: 2px solid transparent;
	transition: all 0.2s ease;

	&.active {
		background-color: #e0f2fe;
		border-color: #0ea5e9;
	}
}

.model-icon {
	@apply flex items-center justify-center rounded-lg;
}

.model-info {
	@apply flex-1 flex flex-col;
}

.model-label {
	@apply flex flex-row items-center gap-1;
}

.label-text {
	@apply text-sm font-medium text-gray-800;
}

.recommend-badge {
	@apply px-1 rounded;
	background-color: #fef3c7;
}

.badge-text {
	@apply text-xs;
	color: #d97706;
}

.model-desc {
	@apply text-xs text-gray-500 mt-0.5;
}

.model-locked {
	@apply flex flex-row items-center gap-2 px-3 py-2 rounded-lg;
	background-color: #f5f5f5;
}

.locked-text {
	@apply text-sm text-gray-600;
}
</style>
